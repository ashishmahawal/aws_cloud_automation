name: CI-workflow
on: push
jobs:
  lint_check:
    runs-on: ubuntu-latest
    steps:
      - name: Install Deps
        run: |
          sudo apt-get install yamllint
      - name: Clone the Repo
        uses: actions/checkout@v3

      - name: List dir
        run: |
          echo Checking env $GITHUB_WORKSPACE 
          ls
      - name: Linter Check
        run: |
          yamllint ./roles/
  build_collection:
    runs-on: ubuntu-latest
    steps:
      - name: Build Ansible collection
        run: ansible-galaxy collection build
      - name: Upload to Ansible Galaxy
        run: echo "Requires API Token"
      - name: Remove the bundle
        run: rm -f ashishmahawal-aws_automation*.tar.gz